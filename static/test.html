<!DOCTYPE html>
<html>
<head>
    <title>WASM Test</title>
</head>
<body>
    <h1>Zig WASM Test</h1>
    <button onclick="testWasm()">Test WASM</button>
    <div id="output"></div>
    
    <script>
        async function testWasm() {
            const output = document.getElementById('output');
            output.innerHTML = 'Testing WASM...';
            
            try {
                // Test the worker
                const worker = new Worker('/wasm-test-worker.js');
                
                worker.onmessage = (e) => {
                    const { type, nonce, error } = e.data;
                    if (type === 'success') {
                        output.innerHTML = `Success! Nonce: ${nonce}`;
                    } else if (type === 'error') {
                        output.innerHTML = `Error: ${error}`;
                    } else if (type === 'progress') {
                        output.innerHTML = `Progress: ${e.data.attempts} attempts`;
                    }
                };
                
                // Send a simple test
                worker.postMessage({
                    prefix: 'test',
                    target: 'FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF'
                });
                
            } catch (err) {
                output.innerHTML = `Error: ${err.message}`;
            }
        }
    </script>
</body>
</html>
